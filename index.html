<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>GANESH ¬∑ premium matka</title>
  <!-- Font Awesome 6 (free) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Google Font: Inter (ultra clean) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,300;14..32,400;14..32,500;14..32,600;14..32,700;14..32,800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at 10% 30%, #1e1a2e, #0c0b14);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      color: #f0eae1;
    }

    #app {
      width: 100%;
      max-width: 440px;
      margin: 0 auto;
    }

    /* glass‚Äëcard style */
    .page {
      background: rgba(20, 18, 28, 0.85);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(212, 175, 55, 0.25);
      border-radius: 2.5rem;
      padding: 2rem 1.5rem;
      box-shadow: 0 30px 50px -20px rgba(0,0,0,0.8), 0 0 0 1px rgba(212, 175, 55, 0.15) inset;
      animation: fadeReveal 0.6s cubic-bezier(0.16, 1, 0.3, 1);
      display: none;
    }

    .page.active {
      display: block;
    }

    @keyframes fadeReveal {
      0% { opacity: 0; transform: translateY(20px) scale(0.98); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    h2 {
      font-size: 2.4rem;
      font-weight: 700;
      background: linear-gradient(135deg, #f5e7c8, #d4af37 70%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-align: center;
      margin-bottom: 1.2rem;
      letter-spacing: -0.02em;
      filter: drop-shadow(0 2px 4px rgba(212,175,55,0.3));
    }

    .gold-glow {
      color: #d4af37;
      text-shadow: 0 0 8px rgba(212,175,55,0.6);
    }

    /* logo banner ‚Äì rectangular with golden border */
    .logo-banner {
      width: 100%;
      margin: 1rem 0 1.8rem;
      border-radius: 2rem;
      overflow: hidden;
      border: 2px solid #d4af37;
      box-shadow: 0 12px 24px -12px rgba(0,0,0,0.8), 0 0 0 1px #d4af37 inset;
      background: #0e0c17;
    }

    .logo-banner img {
      width: 100%;
      height: auto;
      display: block;
      filter: brightness(1.02) contrast(1.05);
    }

    .big-image {
      width: 100%;
      border-radius: 2rem;
      border: 2px solid #d4af37;
      overflow: hidden;
      margin: 1.2rem 0;
      box-shadow: 0 15px 25px -15px black;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .big-image:hover {
      transform: scale(1.02);
      box-shadow: 0 20px 30px -10px #d4af3740;
    }

    .big-image img {
      width: 100%;
      height: auto;
      display: block;
    }

    .input-group {
      margin-bottom: 1.5rem;
    }

    .input-group label {
      display: block;
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #c0b28b;
      margin-bottom: 0.4rem;
      margin-left: 0.8rem;
    }

    .input-wrapper {
      position: relative;
    }

    .input-wrapper i {
      position: absolute;
      left: 1.2rem;
      top: 50%;
      transform: translateY(-50%);
      color: #d4af37;
      font-size: 1.2rem;
      opacity: 0.9;
      z-index: 2;
    }

    .input-wrapper input {
      width: 100%;
      background: #15121f;
      border: 1px solid #3e3852;
      border-radius: 3rem;
      padding: 1.2rem 1.5rem 1.2rem 3.2rem;
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
      color: white;
      outline: none;
      transition: border 0.2s, box-shadow 0.2s;
      box-shadow: inset 0 4px 10px rgba(0,0,0,0.6);
    }

    .input-wrapper input:focus {
      border-color: #d4af37;
      box-shadow: 0 0 0 3px rgba(212,175,55,0.2), inset 0 2px 8px black;
    }

    .input-wrapper input::placeholder {
      color: #5f5470;
      font-weight: 300;
    }
.btn {
  display: block;
  width: 100%;
  padding: 1.2rem;
  border: none;
  border-radius: 3rem;
  font-weight: 700;
  font-size: 1.2rem;
  letter-spacing: 1px;
  text-transform: uppercase;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  margin: 1.8rem 0 1.2rem;
  background: linear-gradient(135deg, #d4af37, #b48c2c);
  color: #0f0d17;
  border: 1px solid rgba(255,245,190,0.5);
  box-shadow: 0 15px 25px -12px #d4af37, 0 4px 12px rgba(0,0,0,0.6);
  position: relative;
  overflow: hidden;
}

.btn::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,240,0.3), transparent);
  transition: left 0.5s;
}

.btn:hover::after {
  left: 100%;
}

.btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 22px 30px -10px #e6c45e, 0 6px 18px black;
}

.btn-small {
  padding: 0.9rem;
  font-size: 1rem;
  margin: 0.8rem 0;
}

.btn:disabled {
  opacity: 0.4;
  pointer-events: none;
}

.contact-card {
  background: rgba(18, 15, 26, 0.7);
  border-radius: 2rem;
  padding: 1.4rem 1rem;
  margin: 1.8rem 0;
  border: 1px solid #d4af37;
  text-align: center;
  box-shadow: 0 8px 20px -8px black;
}

.whatsapp-link {
  display: inline-flex;
  align-items: center;
  gap: 0.6rem;
  background: #1f1b2b;
  color: #f5e5c1;
  padding: 0.7rem 1.8rem;
  border-radius: 3rem;
  text-decoration: none;
  font-weight: 600;
  border: 1px solid #d4af37;
  margin: 0.5rem 0;
  transition: background 0.2s, transform 0.1s;
}

.whatsapp-link i {
  color: #25D366;
  font-size: 1.3rem;
}

.whatsapp-link:hover {
  background: #2b253b;
  transform: scale(1.02);
}

.market-list {
  list-style: none;
}

.market-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.2rem;
  background: rgba(20, 17, 28, 0.8);
  border-radius: 2rem;
  margin-bottom: 0.8rem;
  border: 1px solid #4a435a;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 4px 8px rgba(0,0,0,0.4);
}

.market-item:hover {
  transform: translateX(8px);
  border-color: #d4af37;
  box-shadow: 0 8px 16px rgba(212,175,55,0.2);
}

.market-item::before {
  content: '\f054';
  font-family: 'Font Awesome 6 Free';
  font-weight: 900;
  color: #d4af37;
  margin-right: 0.8rem;
  font-size: 0.9rem;
  transition: transform 0.2s;
}

.market-item:hover::before {
  transform: translateX(4px);
}

.market-time {
  background: #d4af37;
  color: #0f0d17;
  padding: 0.3rem 1rem;
  border-radius: 2rem;
  font-size: 0.8rem;
  font-weight: 700;
  letter-spacing: 0.3px;
}

.notice {
  background: #0e0b17;
  color: #e5d9b5;
  padding: 1.2rem;
  border-radius: 2rem;
  font-size: 0.85rem;
  line-height: 1.6;
  margin: 1.8rem 0;
  border-left: 6px solid #d4af37;
  white-space: pre-line;
  box-shadow: inset 0 0 15px rgba(0,0,0,0.8);
}

.plan-box {
  display: flex;
  gap: 0.8rem;
  margin: 1.5rem 0;
}

.plan {
  flex: 1;
  background: #181524;
  border: 2px solid #4a405a;
  border-radius: 2rem;
  padding: 1.2rem 0.5rem;
  text-align: center;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  color: #bfb099;
}

.plan.selected {
  border-color: #d4af37;
  background: #2a2340;
  color: #f5e7c8;
  transform: scale(1.02);
  box-shadow: 0 10px 20px -8px #d4af37;
}

.qr-image {
  width: 180px;
  height: 180px;
  border-radius: 2rem;
  border: 3px solid #d4af37;
  box-shadow: 0 15px 25px -12px black;
  object-fit: cover;
  display: block;
  margin: 1.5rem auto;
}
    .detail-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin: 1.8rem 0;
    }

    .detail-card {
      background: #151225;
      border: 1px solid #d4af37;
      border-radius: 1.8rem;
      padding: 1.2rem 0.8rem;
      text-align: center;
      transition: all 0.2s;
      box-shadow: 0 12px 20px -12px black;
    }

    .detail-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 18px 25px -10px #d4af37;
    }

    .detail-card h4 {
      color: #d4af37;
      margin-bottom: 0.5rem;
      font-weight: 600;
      font-size: 1rem;
      letter-spacing: 0.5px;
    }

    .detail-numbers {
      font-size: 1.3rem;
      font-weight: 700;
      color: #f0e2c6;
    }

    .nav-bar {
      display: flex;
      justify-content: space-between;
      margin-top: 1.5rem;
    }

    .nav-btn {
      background: none;
      border: none;
      color: #d4af37;
      font-weight: 600;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      cursor: pointer;
      padding: 0.6rem 1.2rem;
      border-radius: 3rem;
      transition: all 0.2s;
      background: rgba(212,175,55,0.05);
      border: 1px solid rgba(212,175,55,0.3);
    }

    .nav-btn:hover {
      background: rgba(212,175,55,0.15);
      transform: scale(1.05);
      border-color: #d4af37;
    }

    .timer-message {
      text-align: center;
      font-size: 1rem;
      margin: 1rem 0;
      padding: 0.8rem;
      border-radius: 3rem;
      background: #1f1b2b;
      border: 1px solid #d4af37;
      color: #f5e1b0;
      animation: softPulse 1.5s infinite;
    }

    @keyframes softPulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }

    .error-message {
      color: #ffa07a;
      font-size: 0.9rem;
      text-align: center;
      margin: -0.5rem 0 1rem;
      background: #2a1a1a;
      padding: 0.6rem;
      border-radius: 3rem;
      border: 1px solid #d4af37;
    }

    .disclaimer {
      font-size: 0.6rem;
      color: #948c7a;
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(212,175,55,0.3);
      text-align: justify;
      max-height: 100px;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #d4af37 #221f2c;
    }

    .disclaimer::-webkit-scrollbar {
      width: 4px;
    }
    .disclaimer::-webkit-scrollbar-track {
      background: #221f2c;
    }
    .disclaimer::-webkit-scrollbar-thumb {
      background: #d4af37;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- LOGIN PAGE with headline GANESH -->
    <div id="login-page" class="page active">
      <h2>GANESH</h2>
      <div class="logo-banner">
        <img src="https://i.supaimg.com/d026f774-60e1-4925-88e1-75281544a80e/c33ecce6-da20-4047-a0ce-df100fbd6657.png" alt="Ganesh Logo">
      </div>
      <div style="text-align:center; margin-bottom:1.5rem;">
        <div style="font-weight:500; color:#c0b28b;">MOST TRUSTED MATKA GUESSING</div>
        <div style="font-size:0.85rem; color:#9e8f72;">DATE FIX GAME PLATFORM</div>
      </div>

      <div class="input-group">
        <label>ENTER MOBILE NUMBER</label>
        <div class="input-wrapper">
          <i class="fas fa-mobile-alt"></i>
          <input type="tel" id="mobile" placeholder="9876543210">
        </div>
      </div>
      <div class="input-group">
        <label>ENTER PASSWORD</label>
        <div class="input-wrapper">
          <i class="fas fa-lock"></i>
          <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        </div>
      </div>

      <div id="login-error" class="error-message" style="display: none;"></div>

      <button class="btn" id="login-btn">LOGIN</button>

      <div class="contact-card">
        <div style="margin-bottom:0.5rem;">CONTACT FOR NEW ACCOUNT</div>
        <a href="https://wa.me/917353547650" target="_blank" class="whatsapp-link">
          <i class="fab fa-whatsapp"></i> WhatsApp +917353547650
        </a>
        <div style="margin-top:0.8rem;">
          <i class="fas fa-phone-alt gold-glow"></i> <strong style="color:#d4af37;">OR CALL</strong> +917353547650
        </div>
      </div>

      <div class="disclaimer">
        <strong style="color:#d4af37;">-DISCLAIMER:-</strong> Visiting this site and browsing it is strictly recommended at your own risk. Every information available here is only according to informational purpose and based on astrology and number calculations. We are no associated or affiliated with any illegal Matka business. We make sure we follow all rules and regulations of the regions where you are accessing the website. There are also chances that the website may be banned in your area and after that if you are using it, you are solely dependable and responsible for any damage, loss or legal action taken. If you are the one who does not like our disclaimer it is advised that you leave our website immediately. Copying of any information/contents posted on the website is strictly prohibited and against the law.
      </div>
    </div>
    <!-- end login page -->
<!-- DASHBOARD PAGE -->
<div id="dashboard-page" class="page">
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <h2 style="margin:0; font-size:2rem;">DASHBOARD</h2>
    <div style="text-align:right;">
      <span id="live-date" style="display:block; font-size:0.75rem; color:#c0b28b;"></span>
      <span id="live-time" style="font-weight:600; color:#d4af37; font-size:1.1rem;"></span>
    </div>
  </div>
  <div class="logo-banner">
    <img src="https://i.supaimg.com/d026f774-60e1-4925-88e1-75281544a80e/c33ecce6-da20-4047-a0ce-df100fbd6657.png" alt="Ganesh Logo">
  </div>

  <!-- dashboard images (keep your links) -->
  <div class="big-image">
    <img src="https://i.supaimg.com/d026f774-60e1-4925-88e1-75281544a80e/e6d32229-8638-4d0d-8168-0ecf26c97511.jpg" alt="Dashboard 1">
  </div>
  <div class="big-image">
    <img src="https://i.supaimg.com/d026f774-60e1-4925-88e1-75281544a80e/a3bf0825-c851-401d-b7e6-4b2e27fb9fb9.jpg" alt="Dashboard 2">
  </div>

  <div class="market-list">
    <div class="market-item" data-market="sridevi">Sridevi <span class="market-time">10:00 AM</span></div>
    <div class="market-item" data-market="timebazar">Time Bazar <span class="market-time">12:00 PM</span></div>
    <div class="market-item" data-market="milanday">Milan Day <span class="market-time">2:00 PM</span></div>
    <div class="market-item" data-market="kalyan">Kalyan <span class="market-time">2:30 PM</span></div>
    <div class="market-item" data-market="sridevinight">Sridevi Night <span class="market-time">6:00 PM</span></div>
    <div class="market-item" data-market="milannight">Milan Night <span class="market-time">8:00 PM</span></div>
    <div class="market-item" data-market="mainbazar">Main Bazar <span class="market-time">8:30 PM</span></div>
  </div>

  <div class="notice" id="dashboard-notice">
    <strong style="color:#d4af37;">üì¢ NOTICE BOARD</strong><br>
    <!-- filled by js -->
  </div>

  <button class="btn btn-small" id="goto-subscription">SUBSCRIPTION</button>
  <div class="nav-bar">
    <button class="nav-btn" id="refresh-dash"><i class="fas fa-sync-alt"></i> REFRESH</button>
    <button class="nav-btn" id="logout"><i class="fas fa-sign-out-alt"></i> LOGOUT</button>
  </div>
</div>

<!-- MARKETS PAGE -->
<div id="markets-page" class="page">
  <h2>üìä MARKETS</h2>
  <div class="market-list">
    <div class="market-item" data-market="kalyan">KALYAN <span class="market-time">2:30 PM</span></div>
    <div class="market-item" data-market="sridevi">SRIDEVI <span class="market-time">10:00 AM</span></div>
    <div class="market-item" data-market="timebazar">TIME BAZAR <span class="market-time">12:00 PM</span></div>
    <div class="market-item" data-market="milanday">MILAN DAY <span class="market-time">2:00 PM</span></div>
    <div class="market-item" data-market="sridevinight">SRIDEVI NIGHT <span class="market-time">6:00 PM</span></div>
    <div class="market-item" data-market="milannight">MILAN NIGHT <span class="market-time">8:00 PM</span></div>
    <div class="market-item" data-market="mainbazar">MAIN BAZAR <span class="market-time">8:30 PM</span></div>
  </div>
  <div class="notice" id="markets-notice">
    <strong style="color:#d4af37;">üì¢ NOTICE BOARD</strong><br>
  </div>
  <div class="nav-bar">
    <button class="nav-btn" id="back-to-dash"><i class="fas fa-arrow-left"></i> BACK</button>
    <button class="nav-btn" id="refresh-markets"><i class="fas fa-sync-alt"></i> REFRESH</button>
  </div>
</div>

<!-- MARKET DETAIL PAGE -->
<div id="detail-page" class="page">
  <h2 id="detail-title">KALYAN</h2>
  <div class="detail-grid" id="detail-grid"></div>
  <div class="nav-bar">
    <button class="nav-btn" id="back-to-markets"><i class="fas fa-arrow-left"></i> BACK</button>
    <button class="nav-btn" id="refresh-detail"><i class="fas fa-sync-alt"></i> REFRESH</button>
  </div>
</div>
  <!-- SUBSCRIPTION PAGE -->
  <div id="subscription-page" class="page">
    <!-- top image -->
    <div class="big-image">
      <img id="sub-top-img" src="https://i.supaimg.com/d026f774-60e1-4925-88e1-75281544a80e/f94bbdd7-fa3c-4791-a387-18bd057b2868.jpg" alt="Top">
    </div>

    <h2>SUBSCRIPTION</h2>
    <div style="text-align:center;">
      <div class="plan-box">
        <div class="plan" id="plan-1day">1 day<br>‚Çπ1100</div>
        <div class="plan" id="plan-1week">1 week<br>‚Çπ5100</div>
      </div>
      <p style="color:#b9a477;">Select plan and scan QR to pay</p>

      <!-- QR code image (your link) -->
      <img src="https://i.supaimg.com/d026f774-60e1-4925-88e1-75281544a80e/0e62c615-2776-42a3-99b4-252c5fb435c1.png" alt="QR Code" class="qr-image" id="qr-code-img">

      <p style="font-size:0.85rem; color:#b9a477;">Scan via PhonePe, GPay, Paytm, any UPI</p>

      <!-- timer area -->
      <div id="timer-container" style="display: none;">
        <div class="timer-message" id="timer-message"></div>
      </div>

      <div class="contact-card" style="margin-top:1.5rem;">
        <div>üì≤ SEND PAYMENT SCREENSHOT</div>
        <div style="font-size:0.8rem;">and wait few minutes to verify</div>
        <a href="#" class="whatsapp-link" id="payment-whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp +917353547650</a>
        <div style="margin-top:0.5rem;">Or Telegram: 
          <a href="tg://resolve?domain=rudrakshank" style="color:#d4af37;">Open in App</a> | 
          <a href="https://t.me/rudrakshank" style="color:#d4af37;">Web</a>
        </div>
      </div>
    </div>

    <!-- BACK & I HAVE PAID buttons -->
    <div class="nav-bar">
      <button class="nav-btn" id="back-from-sub"><i class="fas fa-arrow-left"></i> BACK</button>
      <button class="nav-btn" id="paid-btn">I HAVE PAID</button>
    </div>

    <!-- bottom image -->
    <div class="big-image">
      <img id="sub-bottom-img" src="https://i.supaimg.com/d026f774-60e1-4925-88e1-75281544a80e/c33ecce6-da20-4047-a0ce-df100fbd6657.png" alt="Bottom">
    </div>
  </div>
</div>
<!-- end #app -->

<!-- Firebase SDKs (v9 compat) -->
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

<script>
  // üî• YOUR NEW FIREBASE CONFIG
  const firebaseConfig = {
    apiKey: "AIzaSyC7mxOFOYebaxV8dAwpfP7a_Ayq7TAIbds",
    authDomain: "fixgame-fa24c.firebaseapp.com",
    projectId: "fixgame-fa24c",
    storageBucket: "fixgame-fa24c.firebasestorage.app",
    messagingSenderId: "242917437907",
    appId: "1:242917437907:web:ee29a01f9290cf6b6c7f26",
    measurementId: "G-ZFB6GN6PX7"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  // ---------- MARKET DATA (edit numbers here) ----------
  const config = {
    adminWhatsApp: "+917353547650",
    markets: {
      kalyan: {
        name: "KALYAN", time: "2:30 PM",
        labels: { otc: "O.T.C", support: "SUPPORT", jodi: "JODI", pannel: "PANNEL" },
        numbers: { otc: "5* 3* 6* 2*", support: "5* 3*", jodi: "53 35 62 26", pannel: "123* 145* 245* 356*" }
      },
      sridevi: {
        name: "SRIDEVI", time: "10:00 AM",
        labels: { otc: "O.T.C", support: "SUPPORT", jodi: "JODI", pannel: "PANNEL" },
        numbers: { otc: "2* 7* 4* 9*", support: "2* 7*", jodi: "27 72 49 94", pannel: "234* 257* 279* 290*" }
      },
      timebazar: {
        name: "TIME BAZAR", time: "12:00 PM",
        labels: { otc: "O.T.C", support: "SUPPORT", jodi: "JODI", pannel: "PANNEL" },
        numbers: { otc: "1* 4* 8* 3*", support: "1* 4*", jodi: "14 41 83 38", pannel: "123* 148* 183* 134*" }
      },
      milanday: {
        name: "MILAN DAY", time: "2:00 PM",
        labels: { otc: "O.T.C", support: "SUPPORT", jodi: "JODI", pannel: "PANNEL" },
        numbers: { otc: "6* 1* 5* 8*", support: "6* 1*", jodi: "61 16 58 85", pannel: "167* 168* 156* 158*" }
      },
      sridevinight: {
        name: "SRIDEVI NIGHT", time: "6:00 PM",
        labels: { otc: "O.T.C", support: "SUPPORT", jodi: "JODI", pannel: "PANNEL" },
        numbers: { otc: "9* 2* 7* 4*", support: "9* 2*", jodi: "92 29 74 47", pannel: "279* 294* 247* 249*" }
      },
      milannight: {
        name: "MILAN NIGHT", time: "8:00 PM",
        labels: { otc: "O.T.C", support: "SUPPORT", jodi: "JODI", pannel: "PANNEL" },
        numbers: { otc: "3* 6* 2* 5*", support: "3* 6*", jodi: "36 63 25 52", pannel: "356* 325* 362* 352*" }
      },
      mainbazar: {
        name: "MAIN BAZAR", time: "8:30 PM",
        labels: { otc: "O.T.C", support: "SUPPORT", jodi: "JODI", pannel: "PANNEL" },
        numbers: { otc: "4* 8* 1* 7*", support: "4* 8*", jodi: "48 84 17 71", pannel: "148* 147* 178* 187*" }
      }
    },
    noticeBoard: "gsgsivdhdjissjhehehs\nhdsgywighdjsksososooss\ndveuowgdhjdjidjdjjjdjd\ngdurhdhdsjsjsjsj\ngsuwo vxgiwi vdhiw bdhek"
  };
// ---------- Helper functions ----------
function showPage(pageId) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(pageId).classList.add('active');
}

function loadMarketDetail(marketKey) {
  const market = config.markets[marketKey];
  if (!market) return;
  document.getElementById('detail-title').innerText = market.name;
  const grid = document.getElementById('detail-grid');
  grid.innerHTML = '';
  ['otc','support','jodi','pannel'].forEach(key => {
    const card = document.createElement('div');
    card.className = 'detail-card';
    card.innerHTML = `<h4>${market.labels[key]}</h4><div class="detail-numbers">${market.numbers[key]}</div>`;
    grid.appendChild(card);
  });
}

function updateDateTime() {
  const now = new Date();
  const dateEl = document.getElementById('live-date');
  const timeEl = document.getElementById('live-time');
  if (dateEl) dateEl.innerText = now.toLocaleDateString('en-IN', { day:'2-digit', month:'short', year:'numeric' }).toUpperCase();
  if (timeEl) timeEl.innerText = now.toLocaleTimeString('en-IN', { hour:'2-digit', minute:'2-digit', second:'2-digit' });
}
setInterval(updateDateTime, 1000);

function applyMarketTimesAndNotices() {
  document.querySelectorAll('.market-item[data-market]').forEach(el => {
    const key = el.getAttribute('data-market');
    if (config.markets[key]) {
      const timeSpan = el.querySelector('.market-time');
      if (timeSpan) timeSpan.innerText = config.markets[key].time;
    }
  });
  document.querySelectorAll('.notice').forEach(el => {
    el.innerHTML = `<strong style="color:#d4af37;">üì¢ NOTICE BOARD</strong><br>${config.noticeBoard.replace(/\n/g,'<br>')}`;
  });
}

async function ensureUserDocument(user) {
  if (!user) return null;
  const userRef = db.collection('users').doc(user.uid);
  const doc = await userRef.get();
  if (!doc.exists) {
    const mobile = user.email ? user.email.replace('@matka.com','') : '';
    await userRef.set({ mobile, subscriptionActive: false, createdAt: firebase.firestore.FieldValue.serverTimestamp() });
    return { subscriptionActive: false };
  } else {
    return doc.data();
  }
}

// Timer variables
let timerInterval = null;
let timerEndTime = null;
const TIMER_DURATION = 10 * 60 * 1000;

function startTimer() {
  const timerContainer = document.getElementById('timer-container');
  const timerMessage = document.getElementById('timer-message');
  if (!timerContainer || !timerMessage) return;
  if (timerInterval) clearInterval(timerInterval);
  timerEndTime = Date.now() + TIMER_DURATION;
  timerContainer.style.display = 'block';
  document.getElementById('paid-btn').disabled = true;

  timerInterval = setInterval(async () => {
    const remaining = timerEndTime - Date.now();
    if (remaining <= 0) {
      clearInterval(timerInterval); timerInterval = null;
      timerContainer.style.display = 'none';
      document.getElementById('paid-btn').disabled = false;
      alert('Payment verification timeout. Try again.');
      return;
    }
    const mins = Math.floor(remaining/60000);
    const secs = Math.floor((remaining%60000)/1000);
    timerMessage.innerText = `‚è≥ Verifying... ${mins}:${secs<10?'0':''}${secs}`;

    const user = auth.currentUser;
    if (user) {
      const doc = await db.collection('users').doc(user.uid).get();
      if (doc.exists && doc.data().subscriptionActive) {
        clearInterval(timerInterval); timerInterval = null;
        timerContainer.style.display = 'none';
        document.getElementById('paid-btn').disabled = false;
        alert('Payment verified!');
        showPage('dashboard-page');
      }
    }
  }, 5000);
}

// Loading screen
if (!document.getElementById('loading-screen')) {
  const ld = document.createElement('div');
  ld.id = 'loading-screen';
  ld.style.cssText = 'position:fixed; top:0; left:0; width:100%; height:100%; background:radial-gradient(circle at 30% 30%, #1e1a2e, #0c0b14); display:flex; align-items:center; justify-content:center; z-index:9999; transition:opacity 0.3s;';
  ld.innerHTML = '<div style="text-align:center; color:#d4af37;"><div style="font-size:3rem; margin-bottom:1rem;">üïâÔ∏è</div><div style="font-weight:300;">loading GANESH ...</div></div>';
  document.body.appendChild(ld);
}
function hideLoading() {
  const loader = document.getElementById('loading-screen');
  if (loader) { loader.style.opacity = '0'; setTimeout(() => loader.remove(), 300); }
}

// Back button (double tap to exit on login)
let backPressedOnce = false;
window.addEventListener('popstate', (e) => {
  const cur = document.querySelector('.page.active').id;
  if (cur === 'login-page') {
    if (backPressedOnce) { if (confirm('Exit app?')) window.history.back(); }
    else { backPressedOnce = true; alert('Press back again to exit'); setTimeout(() => backPressedOnce = false, 2000); history.pushState({},''); }
  } else {
    if (cur === 'markets-page') showPage('dashboard-page');
    else if (cur === 'detail-page') showPage('markets-page');
    else if (cur === 'subscription-page') {
      if (timerInterval) { clearInterval(timerInterval); timerInterval = null; document.getElementById('timer-container').style.display = 'none'; document.getElementById('paid-btn').disabled = false; }
      showPage('dashboard-page');
    } else window.history.back();
  }
});
history.pushState({}, '');
    // ---------- Event listeners ----------
    document.addEventListener('DOMContentLoaded', function() {
      applyMarketTimesAndNotices();
      updateDateTime();

      // REFRESH BUTTONS ‚Äì actual page reload
      document.getElementById('refresh-dash').addEventListener('click', () => location.reload());
      document.getElementById('refresh-markets').addEventListener('click', () => location.reload());
      document.getElementById('refresh-detail').addEventListener('click', () => location.reload());

      // Login
      document.getElementById('login-btn').addEventListener('click', (e) => {
        e.preventDefault();
        const mobile = document.getElementById('mobile').value.trim();
        const pw = document.getElementById('password').value.trim();
        const err = document.getElementById('login-error');
        if (!mobile || !pw) {
          err.style.display = 'block'; err.innerText = 'Enter mobile & password'; return;
        }
        auth.signInWithEmailAndPassword(mobile+'@matka.com', pw)
          .then(() => err.style.display = 'none')
          .catch(e => {
            err.style.display = 'block';
            if (e.code === 'auth/user-not-found' || e.code === 'auth/wrong-password')
              err.innerText = 'Invalid mobile or password';
            else err.innerText = 'Login failed';
          });
      });

      // Logout
      document.getElementById('logout').addEventListener('click', () => auth.signOut());

      // Paid
      document.getElementById('paid-btn').addEventListener('click', async () => {
        const user = auth.currentUser;
        if (!user) return alert('Login required');
        let plan = '1 day';
        if (document.getElementById('plan-1week').classList.contains('selected')) plan = '1 week';
        else if (!document.getElementById('plan-1day').classList.contains('selected')) return alert('Select plan');
        try {
          const data = await ensureUserDocument(user);
          const mobile = data.mobile || user.email.split('@')[0];
          const msg = `PAYMENT REQUEST%0AMobile: ${mobile}%0APlan: ${plan}%0AUID: ${user.uid}`;
          window.open(`https://wa.me/${config.adminWhatsApp.replace(/\D/g,'')}?text=${msg}`, '_blank');
          startTimer();
          alert('WhatsApp opened. Send screenshot.');
        } catch (er) { alert('Error'); }
      });

      // Plan selection
      document.getElementById('plan-1day').addEventListener('click', function() {
        document.querySelectorAll('.plan').forEach(p => p.classList.remove('selected'));
        this.classList.add('selected');
      });
      document.getElementById('plan-1week').addEventListener('click', function() {
        document.querySelectorAll('.plan').forEach(p => p.classList.remove('selected'));
        this.classList.add('selected');
      });

      // Navigation
      document.getElementById('goto-subscription').addEventListener('click', () => showPage('subscription-page'));
      document.getElementById('back-from-sub').addEventListener('click', () => {
        if (timerInterval) { clearInterval(timerInterval); timerInterval = null; document.getElementById('timer-container').style.display = 'none'; document.getElementById('paid-btn').disabled = false; }
        showPage('dashboard-page');
      });
      document.getElementById('back-to-dash').addEventListener('click', () => showPage('dashboard-page'));
      document.getElementById('back-to-markets').addEventListener('click', () => showPage('markets-page'));

      // Market clicks
      document.querySelectorAll('.market-item').forEach(el => {
        el.addEventListener('click', async (e) => {
          const key = e.currentTarget.getAttribute('data-market');
          if (!key) return;
          const user = auth.currentUser;
          if (!user) return showPage('login-page');
          try {
            const data = await ensureUserDocument(user);
            if (data.subscriptionActive) {
              loadMarketDetail(key);
              showPage('detail-page');
            } else {
              alert('Subscription not active. Contact admin.');
              showPage('subscription-page');
            }
          } catch { showPage('subscription-page'); }
        });
      });

      // Auth observer
      let authInit = false;
      auth.onAuthStateChanged(async user => {
        if (!authInit) authInit = true;
        if (!user && timerInterval) {
          clearInterval(timerInterval); timerInterval = null;
          document.getElementById('timer-container').style.display = 'none';
          document.getElementById('paid-btn').disabled = false;
        }
        if (user) {
          try {
            const data = await ensureUserDocument(user);
            showPage(data.subscriptionActive ? 'dashboard-page' : 'subscription-page');
          } catch { showPage('subscription-page'); }
        } else showPage('login-page');
        if (authInit) hideLoading();
      });
      setTimeout(hideLoading, 3000);
    });
  </script>
</body>
</html>
